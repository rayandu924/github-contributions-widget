<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Contributions</title>
  <style>
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--fg);
      background: transparent;
    }

    /* States */
    .state {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px;
      text-align: center;
      width: 100%;
      height: 100%;
    }

    .state.active {
      display: flex;
    }

    .state-icon {
      font-size: 32px;
    }

    .state-title {
      font-size: 14px;
      font-weight: 600;
      color: #f0f6fc;
    }

    .state-message {
      font-size: 11px;
      color: #8b949e;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      border: none;
    }

    .btn-primary {
      background: #238636;
      color: #fff;
    }

    .btn-secondary {
      background: #21262d;
      color: #c9d1d9;
      border: 1px solid #30363d;
    }

    .spinner {
      width: 30px;
      height: 30px;
      border: 2px solid #30363d;
      border-top-color: #238636;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .error-icon {
      color: #f85149;
    }

    /* Container - ALL sizes from CSS variables */
    .container {
      display: none;
      flex-direction: column;
      width: 100%;
      height: 100%;
      padding: var(--padding, 8px);
    }

    .container.active {
      display: flex;
    }

    .background-layer {
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
    }

    /* Header - responsive height */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      height: var(--header-height, 36px);
      flex-shrink: 0;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .avatar {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .username {
      font-weight: 600;
      font-size: var(--label-font-size, 10px);
      color: var(--fg);
    }

    .year-label {
      font-size: calc(var(--label-font-size, 10px) * 0.8);
      color: #8b949e;
    }

    .stats {
      display: flex;
      gap: 8px;
    }

    .stat {
      display: flex;
      align-items: baseline;
      gap: 2px;
    }

    .stat-value {
      font-size: var(--label-font-size, 10px);
      font-weight: 600;
      color: #f0f6fc;
    }

    .stat-label {
      font-size: calc(var(--label-font-size, 10px) * 0.7);
      color: #8b949e;
    }

    /* Graph wrapper - fills remaining space */
    .graph-wrapper {
      flex: 1;
      display: flex;
      min-height: 0;
      min-width: 0;
    }

    .graph-container {
      display: flex;
      width: 100%;
      height: 100%;
    }

    /* Day labels - responsive width */
    .day-labels {
      display: flex;
      flex-direction: column;
      gap: var(--cell-gap, 2px);
      width: var(--day-labels-width, 24px);
      flex-shrink: 0;
      padding-top: var(--week-header-height, 0px);
    }

    .day-label {
      height: var(--cell-height, 10px);
      font-size: var(--label-font-size, 8px);
      color: #8b949e;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 3px;
    }

    .day-label:nth-child(even) {
      visibility: hidden;
    }

    /* Graph grid - fills all space */
    .graph {
      display: flex;
      gap: var(--cell-gap, 2px);
      flex: 1;
    }

    .week {
      display: flex;
      flex-direction: column;
      gap: var(--cell-gap, 2px);
      flex: 1;
    }

    .week-header {
      height: var(--week-header-height, 0px);
      font-size: var(--label-font-size, 8px);
      color: #8b949e;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .day {
      width: 100%;
      height: var(--cell-height, 10px);
      border-radius: var(--cell-radius, 2px);
      background: var(--level-0);
      cursor: pointer;
      transition: opacity 0.1s;
      flex-shrink: 0;
    }

    .day:hover {
      opacity: 0.75;
    }

    .day.level-0 {
      background: var(--level-0);
    }

    .day.level-1 {
      background: var(--level-1);
    }

    .day.level-2 {
      background: var(--level-2);
    }

    .day.level-3 {
      background: var(--level-3);
    }

    .day.level-4 {
      background: var(--level-4);
    }

    /* Footer - responsive height */
    .legend {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      height: var(--footer-height, 20px);
      flex-shrink: 0;
      font-size: var(--label-font-size, 8px);
      color: #8b949e;
    }

    .legend-squares {
      display: flex;
      gap: 2px;
    }

    .legend-square {
      width: 8px;
      height: 8px;
      border-radius: 2px;
    }

    /* Tooltip */
    .tooltip {
      display: none;
      position: fixed;
      padding: 4px 8px;
      background: #1c2128;
      border: 1px solid #30363d;
      border-radius: 4px;
      font-size: 10px;
      color: #f0f6fc;
      pointer-events: none;
      z-index: 1000;
    }

    .tooltip.visible {
      display: block;
    }

    .tooltip-count {
      font-weight: 700;
    }

    .tooltip-date {
      color: #8b949e;
      margin-left: 3px;
    }

    /* CSS Variables */
    :root {
      --level-0: var(--mw-config-colorLevel0, #161b22);
      --level-1: var(--mw-config-colorLevel1, #0e4429);
      --level-2: var(--mw-config-colorLevel2, #006d32);
      --level-3: var(--mw-config-colorLevel3, #26a641);
      --level-4: var(--mw-config-colorLevel4, #39d353);
      --cell-width: 10px;
      --cell-height: 10px;
      --cell-gap: 2px;
      --cell-radius: 2px;
      --week-header-height: 0px;
      --day-labels-width: 24px;
      --label-font-size: 8px;
      --header-height: 36px;
      --footer-height: 20px;
      --padding: 8px;
      --bg: var(--mw-theme-background, #0d1117);
      --fg: var(--mw-theme-foreground, #c9d1d9);
      --border-color: var(--mw-theme-border, #30363d);
    }
  </style>
</head>

<body>
  <div class="background-layer" id="background"></div>
  <div class="state" id="state-auth">
    <div class="state-icon">üîê</div>
    <div class="state-title">GitHub Access Required</div>
    <div class="state-message">Reinstall and grant access</div>
  </div>
  <div class="state" id="state-loading">
    <div class="spinner"></div>
    <div class="state-title">Loading...</div>
    <div class="state-message" id="loading-message">Fetching data</div>
  </div>
  <div class="state" id="state-error">
    <div class="state-icon error-icon">‚ö†Ô∏è</div>
    <div class="state-title" id="error-title">Error</div>
    <div class="state-message" id="error-message">Unable to load</div>
    <button class="btn btn-secondary" id="btn-retry">Retry</button>
  </div>
  <div class="container" id="container">
    <div class="header">
      <div class="user-info">
        <img class="avatar" id="avatar"
          src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="">
        <div>
          <div class="username" id="username">Loading...</div>
          <div class="year-label" id="year-label">2024</div>
        </div>
      </div>
      <div class="stats" id="stats"></div>
    </div>
    <div class="graph-wrapper">
      <div class="graph-container" id="graph-container">
        <div class="day-labels" id="day-labels"></div>
        <div class="graph" id="graph"></div>
      </div>
    </div>
    <div class="legend" id="legend">
      <span>Less</span>
      <div class="legend-squares" id="legend-squares"></div>
      <span>More</span>
    </div>
  </div>
  <div class="tooltip" id="tooltip">
    <span class="tooltip-count" id="tooltip-count">0</span>
    <span class="tooltip-date" id="tooltip-date">Jan 1</span>
  </div>
  <script src="widget.js"></script>
</body>

</html>